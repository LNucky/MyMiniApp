<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Telegram App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            text-align: center;
        }
        button {
            padding: 10px 20px;
            background: #0088cc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>üöÄ –ú–æ—è –ø–µ—Ä–≤–∞—è Mini App!</h1>
    <p>–ü—Ä–∏–≤–µ—Ç –∏–∑ Telegram Web App!</p>
    
    <button id="test-button">–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞</button>
    
    <script>
        Telegram.WebApp.ready();
        
        document.getElementById('test-button').addEventListener('click', async function() {
            try {
                const backendUrl = 'backendformma-production.up.railway.app';
                
                const response = await fetch(backendUrl + '/api/button-click', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        button_id: 'test-button',
                        user_action: 'click',
                        timestamp: new Date().toISOString(),
                        // –î–∞–Ω–Ω—ã–µ –∏–∑ Telegram (–µ—Å–ª–∏ –µ—Å—Ç—å)
                        telegram_data: Telegram.WebApp.initDataUnsafe || {}
                    })
                });
                
                const result = await response.json();
                alert(`–°–µ—Ä–≤–µ—Ä: ${result.message}\n–î–∞–Ω–Ω—ã–µ: ${JSON.stringify(result.received_data)}`);
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        });
    </script>
</body>
</html>